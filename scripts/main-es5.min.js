"use strict";function fetchAutocomplete(e){if(13!=e.which){var t=this.value.trim(),n=document.querySelector(".autocomplete-list");t.length<3||fetch("https://api.openweathermap.org/data/2.5/find?q="+t+"&APPID="+apiKey).then(function(e){return e.json()}).then(function(e){var t=e.list.map(function(e){return"<li class='autocomplete-list-item' data-id="+e.id+">\n            "+e.name+", "+e.sys.country+"\n          </li>"}).join("");n.innerHTML=t}).then(function(){document.querySelectorAll(".autocomplete-list-item").forEach(function(e){e.addEventListener("click",fetchWeatherData)})})}}function fetchWeatherData(e){e.preventDefault();var t=void 0,n=document.querySelector(".autocomplete-list");if("submit"==e.type){var i=document.querySelectorAll(".autocomplete-list-item");if(0==i.length)return void(n.innerHTML="<li class='error-info'>There is no such city</li>");t=i[0].dataset.id,n.innerHTML=""}else t=this.dataset.id,n.innerHTML="";fetch("https://api.openweathermap.org/data/2.5/weather?id="+t+"&APPID="+apiKey).then(function(e){return e.json()}).then(function(e){var t=moment.unix(e.dt).format("h:mm a"),n=void 0;n=e.clouds.all<10?"one-num":e.clouds.all>=10&&100!=e.clouds.all?"two-num":"tree-num";var i='\n          <div class="main-icon-container">\n            <i class=\'wi wi-owm-'+e.weather[0].id+' main-icon\'></i>\n          </div>\n          <div class="current-weather">\n            <div class="current-temp">\n              <span class="current-temp-info"><i class=\'wi wi-thermometer thermometr-icon\'></i>'+(e.main.temp-273.15).toFixed(1)+'<i class=\'wi wi-degrees\'></i></span>\n              <p class="weather-text">Current temp.</p>\n            </div>\n            <div class="humidity-info">\n              <span class="weather-info">'+e.main.humidity+' <i class=\'wi wi-humidity humidity-icon\'></i></span>\n              <p class="weather-text">Humidity</p>\n            </div>\n            <div class="pressure-info">\n              <span class="weather-info">'+e.main.pressure+" hPa</span>\n              <p class=\"weather-text\">Pressure</p>\n            </div>\n          </div>\n          <p class='update-time'>Last update "+t+'</p>\n          <div class="clouds col-1-3">\n            <div class="clouds-icon-container">\n              <i class="wi wi-cloud clouds-icon"></i>\n              <span class="clouds-info-messure '+n+'">'+e.clouds.all+'</span>\n              <span class="clouds-info-prec">%</span>\n            </div>\n            <p class="weather-text">Cloudiness</p>\n          </div>\n          <div class="wind-status col-1-3">\n            <i class="wi wi-wind towards-0-deg wind-status-icon" style="transform: rotate('+e.wind.deg+'deg)"></i>\n            <p class="weather-text">Wind direction</p>\n          </div>\n          <div class="wind-speed col-1-3">\n            <div class="wind-speed-icon-container">\n              <i class="wi wi-strong-wind wind-speed-icon"></i>\n              <span class="wind-messure">'+e.wind.speed+'m/s</span>\n            </div>\n            <p class="weather-text">Wind speed</p>\n          </div>\n          <div class="forecast-container">\n            <h2 class="forecast-title">Forecast for next 5 days</h2>\n            <div class="forecast-days"></div>\n          </div>\n        ';appPrint.innerHTML=i,formInput.value=e.name+", "+e.sys.country}).then(function(){var e=document.querySelector(".forecast-days");fetch("https://api.openweathermap.org/data/2.5/forecast?id="+t+"&APPID="+apiKey).then(function(e){return e.json()}).then(function(t){var n=t.list.filter(function(e){return"12:00:00"==e.dt_txt.split(" ")[1]}).map(function(e){return'<div class="forecast-day">\n                  <p class="dayOfWeek">'+moment.unix(e.dt).format("dddd")+"</p>\n                  <i class='wi wi-owm-"+e.weather[0].id+' daily-weather-icon\'></i>\n                  <p class="day-temp">'+(e.main.temp-273.15).toFixed(1)+"<i class='wi wi-degrees'></i></p>\n                </div>"}).join("");e.innerHTML=n})}).catch(function(e){console.log(e),e&&(autocompleteList.innerHTML="<li class='search-error'>No locations were found that would meet the criteria</li>")})}function fetchCityData(){var e=this.dataset.key;formInput.value="",this.offsetParent.style.display="none",fetch("http://dataservice.accuweather.com/currentconditions/v1/"+e+"?apikey="+apiKey+"&details=True",{method:"get",headers:{"Accept-Encoding":"gzip"}}).then(function(e){return e.json().then(function(e){console.log(e)})})}var app=document.querySelector(".app"),appForm=document.querySelector(".search-form"),apiKey="73855c7abb85af3fe9e6ae926705ff06",appPrint=document.querySelector(".weather-info-container"),formInput=document.querySelector(".search-form-input");formInput.addEventListener("keyup",fetchAutocomplete),appForm.addEventListener("submit",fetchWeatherData);